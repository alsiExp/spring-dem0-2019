package ru.cpsmi.springdemo2019.service.impl;import com.fasterxml.jackson.databind.ObjectMapper;import com.fasterxml.jackson.databind.ObjectReader;import org.apache.http.client.methods.CloseableHttpResponse;import org.apache.http.client.methods.HttpGet;import org.apache.http.impl.client.CloseableHttpClient;import org.apache.http.impl.client.HttpClients;import org.apache.http.util.EntityUtils;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Service;import ru.cpsmi.springdemo2019.model.Person;import ru.cpsmi.springdemo2019.service.PersonIntegrationService;import java.io.IOException;@Servicepublic class PersonIntegrationServiceImpl implements PersonIntegrationService {    @Value("${app.swapi.url}")    private String baseUrl;    @Override    public Person getPerson(String id) {        try (CloseableHttpClient client = HttpClients.createSystem()) {            HttpGet request = new HttpGet(baseUrl + "people/" + id);            System.out.println(request);            CloseableHttpResponse response = client.execute(request);            ObjectReader reader = new ObjectMapper().readerFor(Person.class);            String bodyAsString = EntityUtils.toString(response.getEntity());            System.out.println(bodyAsString);            Person person = reader.readValue(bodyAsString);            person.setId(id);            System.out.println(person);            return person;        } catch (IOException e) {            throw new RuntimeException(e.getMessage());        }    }}